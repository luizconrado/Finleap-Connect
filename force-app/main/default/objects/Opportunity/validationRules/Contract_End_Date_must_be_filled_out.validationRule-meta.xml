<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Contract_End_Date_must_be_filled_out</fullName>
    <active>true</active>
    <errorConditionFormula>IF( Record_Id__c == $CustomMetadata.Constant__mdt.Opp_Standard_Record_Type_Id.Value__c , 
AND(
	OR(
		AND(
		NOT(ISBLANK(Contract_End_Date__c)),
		NOT(ISPICKVAL(StageName,&#39;Cancelled&#39;))			
		),
		
		AND(
		ISBLANK(Contract_End_Date__c),
		ISPICKVAL(StageName,&#39;Cancelled&#39;)			
		)
	),
	NOT(CONTAINS($Label.Users_Exclusion,$User.Username))
	
)
, 
False)</errorConditionFormula>
    <errorDisplayField>Contract_End_Date__c</errorDisplayField>
    <errorMessage>Contract End Date must be filled out if case the contract is cancelled.
However, if the contract is not cancelled, you cannot enter a Contract End Date.</errorMessage>
</ValidationRule>
